<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Code gen</title>
    <style>

    #myCanvas, img{
        position: fixed;
        top: 50%;
        left: 50%;
        margin-left: -120px;
        margin-top: -120px;
    }


    </style>
</head>
<body>

    <canvas id="myCanvas" width="240" height="240"></canvas>

    <script>


        var number = Math.floor(Math.random()*1E15);
        /*
            Split the number to Array
        */
        var digits = (""+number).split("");

        /*
            Give the number of sections you want
        */
        var angleNumber = 3;

        /*
            Get the number of lines you want
        */
        var lines = digits.length / angleNumber;

        /*
            Circle begin at 0 (3 o'clock position) and finish at 2
        */
        var angleCount = 2 / angleNumber;


        /*
            Determine the Radius step
        */
        var radiusStep = 20;


        /*
            Create the magic stuff
            Canvas
        */

        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        /* Color of the stroke */
        ctx.strokeStyle = '#F18C6B';
        /* Width of lines */
        ctx.lineWidth = 4;
        /* Cap of lines */
        ctx.lineCap = 'round';

        /*
            Get width of the canvas, we do not need the height because it's a square
            Get the center of canvas -> width / 2
        */
        var canvasOrigin = (c.width) / 2;
        ctx.beginPath();
        ctx.fillStyle="#3F374D";
	    ctx.arc(canvasOrigin, canvasOrigin, canvasOrigin, 0, Math.PI * 2, false);
	    ctx.fill();


        /*
            (x, y, radius, start, end)
            ctx.arc(50, 50, 50, 0*Math.PI ,1.5*Math.PI);
        */

        for (j = 0; j < angleNumber; j++){
            /* Start for every stroke */
            var strokeStart = angleCount  * (j+1) * Math.PI
            //console.log('ANGLE '+ angleCount  * (j+1));
            for(k = 0; k < lines; k ++){
                /* Determine position from center */
                var strokeRadius = (k+1) * radiusStep;
                /* Give the value in the Digits array */
                var currentValue = digits[(j * lines) + (k)];
                /* End of the stroke (StrokeStart + length of stroke)*/
                var strokeEnd = (strokeStart + (currentValue * (angleCount / 10 )) * Math.PI );

                ctx.beginPath();
                ctx.arc(canvasOrigin, canvasOrigin, strokeRadius, strokeStart, strokeEnd);
                ctx.stroke();
                ctx.closePath();
            }
        }

        var thumbImg = document.createElement('img');
        var sizeImg = 15;
        thumbImg.src = 'https://scontent-amt2-1.xx.fbcdn.net/v/t1.0-1/p320x320/13445251_10208356195196471_1781558187916504694_n.jpg?oh=4fbd5c7db4a91bd953829e4d060bd6d5&oe=57F7856B';
        thumbImg.onload = function() {
            ctx.save();
            ctx.beginPath();
            ctx.arc(canvasOrigin, canvasOrigin, sizeImg, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.clip();

            ctx.drawImage(thumbImg, canvasOrigin - sizeImg, canvasOrigin - sizeImg, sizeImg * 2, sizeImg * 2);
        };

    </script>

</body>
</html>
